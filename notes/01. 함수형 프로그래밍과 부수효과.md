# Chapter 1. 함수형 프로그래밍과 부수효과

## Clip 1. 강의 소개

### 함수형 프로그래밍?

### 작은 순수 함수들을 합성하기

> 작은 함수들을 **합성하는 것(composing)** - 함수형 프로그래밍에서 온 **핵심 아이디어(Key Idea)**

> 함수형 프로그래밍은 오로지 순수(pure) 함소와 이를 더 큰 구조로 **합성(compose)**하는 일에 대한 것일 뿐입니다

> 함수형 프로그래밍에서는 공통의 가능성을 추출하고, **합성(compose)**을 통해 재사용 가능한 일반적 구성요소를 만들기 쉬우며, 그런 일이 당연시된다.

### 핵심 개념 2가지

함수를 합성해서 복잡한 프로그램을 쉽게 만들기

부수효과를 공통적인 방법으로 추상화

### 명령형 vs 함수형(선언형)

| 명령형                                                                               | 함수형                                                                                          |
| ------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------- |
| 어떻게 하는가?<br />기계에게 효율적인 방식<br />상태 변경, 부수효과<br />복잡한 흐름 | 무엇인가?<br />인간이 이해하기 쉬운 방식<br />부수효과가 없는 순수 함수<br />작고 예측하기 쉽다 |

명령헝

함수형(선언형)<br />

### Real World 함수형 프로그래밍

ReScript, Clojure, ReasonML 등 GreenLabs, Facebook에서 사용 중

### 함수형 사고방식을 배우는 강의

### 핵심 질문

프로그램이 왜 복잡해질까?
함수란 무엇인가?
함수를 합성한다는 건?
함수를 합성하면 어떤 게 편해질까?

**함수를 합성해서 복잡한 프로그램을 쉽게 만들기**

## Clip 2. 함수와 함수 합성

### 왜 프로그램이 복잡하게 느껴질까?

부수효과가 얽히고 장황해진 명령형 코드

> That's the goal, really. Simplify understanding. No surprises. Honest code. - 마이클 페더스(레거시 코드 활용 전략 저자)

어떤 입력이 들어가면 어떤 출력이 나오는지 명확하고, 깜짝 놀라는, 부수효과가 없는 함수형 프로그래밍은 정직하다.

### 객체지향과 함수형의 차이

> 명사의 왕국인 객체지향 세계, 동사의 왕국인 함수형 세계 - 스티브 에게

> 100개의 함수를 하나의 자료구조에 적용하는 것이 10개의 함수를 10개의 자료구조를 적용하는 것보다 낫다. - 엘런 펄리스

> 객체지향 프로그래밍은 **움직이는 부분을 캡슐화**하여 코드 이해를 돕고, 함수형 프로그래밍은 **움직이는 부분을 최소화**하여 코드 이해를 돕는다. - 마이클 페더스

> OOP와 함수적 계산은 완전히 조화될 수 있습니다(그리고 그래야만 하죠!). - 앨런 케이

## Clip 3. 부수효과

### 부수효과(Side effect)?

값을 반환하는 것 외에 부수적으로 일으키는 효과.
흔히 부작용이라고 부르기도 함.

- 변수나 상태를 바꾸거나 수정
- 화면이나 파일에 데이터를 쓰는 IO 작업
- 다른 부수효과가 있는 함수나 상태 값에 의존

**기계와 저수준에 최적화된 명령형 방식**

---

- 전역변수나 정적변수 뿐만 아니라 한 번 선언된 변수의 값을 변경할 수 없고, 이를 불변성이라고 부른다.
- 에러나 예외가 발생하여 프로그램의 실행 흐름이 변경되는 것도 역시 부수효과의 일종.

---

**부수효과 명령형 vs 순수 함수**

- 명령형 프로그래밍은 부작용을 사용하여 프로그램이 동작하게 하는 것으로 알려져 있다. 함수형 프로그래밍은 부작용을 최소화 하는 것으로 알려져 있다.

### 합성을 어렵게 만드는 부수효과

> 인간이 한 번에 생각할 수 있는 작업 기억 용량은 3~5개 정도에 불과하다

- 변화하는 상태를 모두 기억해야 한다
- 코드 실행 순서, 횟수, 분기에 따라 결과가 달라짐
- 여기에 비동기나 병렬 처리, 전역 상태까지 더해진다면?

코드를 이해하고 결과를 예측하기는 불가능에 가깝다.

### 함수형으로 모든 프로그램을 작성할 수 있을까?

> 람다 대수는 튜링 완전성을 만족시키며, 보편 튜링 기계와 동치이다.

함수형 프로그래밍에서는 이러한 IO 작업이나 전역 상태를 코드에서 분리하고, 격리해서 기존에 부수효과로 다루었던 작업들을 순수한 것처럼 다룰 수 있도록 추상화하는 것이다.

## Clip 4. 순수함수

프로그래밍에서 함수는 모양과 역할에 따라서 함수, 서브루틴, 루틴, 메서드, 프로시저 등으로 구분해서 부르기도 한다.

### 순수 함수(Pure function)

똑같은 매개변수(입력)를 받으면 항상 같은 값을 반환하는 함수

- 부수효과 없음
- 수학의 함수 > 증명 가능, 안전
- 순서나 실행 횟수랑 상관 없이, 항상 예측 가능한 결과

비교적 인간의 뇌로 생각하기 쉽고 합성하기도 쉽다.
